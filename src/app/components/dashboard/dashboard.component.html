<mat-drawer-container>
    <mat-drawer mode="side" [opened]="sideBarOpen">
        <!-- <mat-drawer mode="side" opened="true"> -->
        <app-sidenav></app-sidenav>
    </mat-drawer>
    <mat-drawer-content>
        <app-header (toggleSidebarForMe)="sideBarToggler()"></app-header>

        <div class="container-fluid page">
            <div class="d-flex page__box p-3 mt-2">Dashboard</div>
            <div class="page__content shadow p-3 position-relative">
                <!--<div class="page__content-data position-absolute text-center">-->
                <div class="container">
               
                      
                    <div class="row mt-5">
                          <div class="col-lg-4 col-md-6">
                            <a class="d-block text-decoration-none" routerLink="/folder">
                                <div class="icon-card mb-30">
                                    <div class="icon blue">
                                        <mat-icon>folder</mat-icon>
                                    </div>
                                    <div class="content">
                                        <h4 class="black-color">Atelier Numérisation</h4>  
                                    </div>  
                                </div>  
                            </a>
                        </div>   

                        <div class="col-lg-4 col-md-6">
                            <a class="d-block text-decoration-none" routerLink="/social">
                                <div class="icon-card mb-30">
                                    <div class="icon red">
                                        <mat-icon>supervised_user_circle</mat-icon>
                                    </div>
                                    <div class="content">
                                        <h4 class="black-color">Département Social</h4>
                                        <!--<h3>...</h3>  
                                                                             
                                         <p class="text-sm text-success">
                                        <i class="fas fa-address-book"></i> +2.00%
                                        <span class="text-gray">(30 days)</span>
                                    </p> -->
                                    </div>
                                </div>
                            </a>
                        </div>
                       
                      
                         <div class="col-lg-4 col-md-6">
                            <a class="d-block text-decoration-none"  routerLink="/user">
                            <div class="icon-card mb-30"> 
                                <div class="icon blue">
                                        <mat-icon>perm_identity</mat-icon>
                                </div>
                                <div class="content">
                                    <h4 class="black-color">Utilisateurs</h4>
                                </div>
                            </div>
                            </a>
                        </div>     
                    </div>
               
                    <div class="row mt-5">
                        <div class="col-lg-4 col-md-6">
                            <!--<a class="d-block text-decoration-none" routerLink="/stats">-->
                                <div class="icon-card mb-30">
                                    <div class="icon red">
                                        <mat-icon>horizontal_split</mat-icon>
                                    </div>
                                    <div class="content">
                                        <h4 class="black-color">Tests IT <br></h4>
                                        <!--<h3 *ngIf="this.folders$ | async as folders" class="text-bold mb-10 ">{{ folders.length }}</h3>-->
                                       
                                        <!--<p class="text-sm text-success">
                                        <i class="fas fa-address-book"></i> +2.00%
                                        <span class="text-gray">(30 days)</span>
                                    </p>-->
                                    </div>
                                </div>
                            <!--</a>-->
                        </div>
                       
                        <div class="col-lg-4 col-md-6">
                           <a class="d-block text-decoration-none" routerLink="/invoices">
                                <div class="icon-card mb-30">
                                    <div class="icon blue">
                                        <mat-icon>receipt</mat-icon>
                                    </div>
                                    <div class="content">
                                        <h4 class="black-color">Facturation <br></h4>  
                                    </div>  
                                </div>  
                            </a>
                        </div>   
                         <div class="col-lg-4 col-md-6">
                            <a class="d-block text-decoration-none"  routerLink="/demandes-conge">
                            <div class="icon-card mb-30"> 
                                <div class="icon blue">
                                        <mat-icon>store_mall_directory</mat-icon>
                                </div>
                                <div class="content">
                                    <h4 class="black-color">Demande de congé</h4>
                                </div>
                            </div>
                            </a>
                        </div>     
                    </div>

                    <hr>
                   <h2 class="text-center mt-5">Gestion des classeurs (Atelier NUM)</h2>

                     <div class="row">
                        <div class="col-lg-4 col-md-6">
                                    <div class="icon-card mb-30">
                                        <div class="icon purple">
                                            <mat-icon>folder</mat-icon>
                                        </div>
                                        <div class="content">
                                            <h6 class="mb-10">Nombre de classeurs</h6>
                                            <h3 *ngIf="this.folders$ | async as folders" class="text-bold mb-10 ">{{ folders.length }}</h3>
                                            <h3></h3>
                                            <!--<p class="text-sm text-success">
                                            <i class="fas fa-address-book"></i> +2.00%
                                            <span class="text-gray">(30 days)</span>
                                        </p>-->
                                        </div>
                                    </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                        
                        </div>
                        <div class="col-lg-4 col-md-6">
                         
                                <!-- <button mat-raised-button color="warn" (click)="openDialogSocialFolder()"> -->
                                 <button disabled mat-raised-button color="warn" routerLink="#">
                            <mat-icon inline=true>note_add</mat-icon>
                            Ajouter un classeur
                        </button>
                           
                        </div>
                    </div>

                    <div class="row mb-5">
                         <mat-form-field appearance="standard" style="width:100%">
                        <mat-label>Filter</mat-label>
                        <input matInput (keyup)="applyFilter($event)" placeholder="Recherche d'une demande de congé" #input>
                    </mat-form-field>
                    <div class="mat-elevation-z8">
                        <table mat-table [dataSource]="dataSource" matSort style="width:100%" matSortActive="createdAt" matSortDirection="desc">
                            
                            
                            <ng-container matColumnDef="nomClasseur">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Classeur </th>
                                <td mat-cell *matCellDef="let row"> {{row.nomClasseur | uppercase }} </td>
                            </ng-container>
                            <ng-container matColumnDef="directory">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Répertoire </th>
                                <td mat-cell *matCellDef="let row"> {{row.directory}} </td>
                            </ng-container>
                            
                            <ng-container matColumnDef="month-year">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Mois et année</th>
                                <td mat-cell *matCellDef="let row">{{row.month}} {{row.year}} </td>
                            </ng-container>
                            <ng-container matColumnDef="state">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> État </th>
                                <td mat-cell *matCellDef="let row"> {{row.state}} </td>
                            </ng-container>
                            <ng-container matColumnDef="createdAt">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Créé le </th>
                                <td mat-cell *matCellDef="let row"> {{row.createdAt.toDate() | date: 'dd/MM/yy'}} </td>
                            </ng-container> 
                           
                          
                            <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Action </th>
                                <td mat-cell *matCellDef="let row" style="width: 155px;">
                                    <button mat-icon-button color="primary" (click)="viewFolder(row.id)">
                                        <mat-icon>find_in_page</mat-icon>
                                    </button>
                                    <button mat-icon-button color="primary" (click)="editFolder(row)">
                                        <mat-icon>edit</mat-icon>
                                    </button>
                                    <button mat-icon-button color="warn" (click)="deleteFolder(row.id)">
                                        <mat-icon>delete</mat-icon>
                                    </button>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                            <!-- Row shown when there is no matching data. -->
                            <tr class="mat-row" *matNoDataRow>
                                <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                            </tr>
                        </table>
                        <mat-paginator [pageSizeOptions]="[10, 25, 100]" aria-label="Select page of users"></mat-paginator>
                    </div>
                    </div>
                <hr>
                <h2 class="text-center mt-5">Gestion des demandes de congé</h2>
                <div class="row">
                        <div class="col-lg-4 col-md-6">
                            <div class="icon-card mb-30">
                                <div class="icon purple">
                                    <mat-icon>line_weight</mat-icon>
                                </div>
                                <div class="content">
                                    <h6 class="mb-10">Nombre de demande de congé</h6>
                                    <h3 *ngIf="leavesRequest" class="text-bold mb-10">{{leavesRequest.length}}</h3>
                                    <!--<p class="text-sm text-success">
                                    <i class="fas fa-address-book"></i> +2.00%
                                    <span class="text-gray">(30 days)</span>
                                </p>-->
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                        
                        </div>
                        <div class="col-lg-4 col-md-6 text-right">
                            <!-- <button mat-raised-button color="warn" (click)="openDialog()">
                            <mat-icon inline=true>note_add</mat-icon>
                            Ajouter une demande de congé
                        </button> -->

                         <button mat-raised-button color="warn" routerLink="/demande-conge/create">
                            <mat-icon inline=true>note_add</mat-icon>
                            Créer une demande de congé
                        </button>
                        </div>
                    </div>
                <div class="row">
                         <mat-form-field appearance="standard" style="width:100%">
                        <mat-label>Filter</mat-label>
                        <input matInput (keyup)="applyFilterLeaveRequests($event)" placeholder="Ex. FOJ" #input>
                    </mat-form-field>
                    <div class="mat-elevation-z8">
                         <table mat-table [dataSource]="dataSourceLeaveRequests" matSort style="width:100%" matSortActive="created_at" matSortDirection="desc">
                            
                         
                            <ng-container matColumnDef="displayName">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Prénom et nom</th>
                                <td mat-cell *matCellDef="let row"> {{row.displayName }} </td>
                            </ng-container>
                            <ng-container matColumnDef="type">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Type congé</th>
                                <td mat-cell *matCellDef="let row"> {{row.type | uppercase }} </td>
                            </ng-container>
                            
                            <ng-container matColumnDef="status">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Statut </th>
                                <td mat-cell *matCellDef="let row">  
                                  <p *ngIf="row.status === 'PROGRESSING'">
                                    <span class="badge bg-dark">En attente</span>
                                  </p>

                                  <p *ngIf="row.status === 'ACCEPTED'">
                                    <span class="badge bg-success">Accepté</span>
                                  </p>

                                  <p *ngIf="row.status === 'CANCELED'">
                                    <span class="badge bg-danger">Annulé</span>
                                  </p>

                                  <p *ngIf="row.status === 'REFUSED'">
                                    <span class="badge bg-danger">Refusé</span>
                                  </p>


                                </td>
                            </ng-container>

                            <ng-container matColumnDef="start_date">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Date de début </th>
                                <td mat-cell *matCellDef="let row"> {{row.start_date | date }} </td>
                            </ng-container>

                            <ng-container matColumnDef="end_date">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Date de fin </th>
                                <td mat-cell *matCellDef="let row"> {{row.end_date | date }} </td>
                            </ng-container>

                            <ng-container matColumnDef="responsable">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Responsable </th>
                                <td mat-cell *matCellDef="let row"> {{row.responsable }} </td>
                            </ng-container>

                            <ng-container matColumnDef="created_at">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header> Créé le </th>
                                <td mat-cell *matCellDef="let row"> {{ row.created_at.toDate() | date }} </td>
                            </ng-container> 
                           
                          
                            <ng-container matColumnDef="action">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Action </th>
                                <td mat-cell *matCellDef="let row" style="width: 155px;">


                                    <!-- <a
                                      routerLink="/invoices/detail/{{ row.id }}"
                                    
                                    >
                                      <button mat-icon-button color="primary">
                                          <mat-icon>find_in_page</mat-icon>
                                      </button>
                                    </a> -->

                                    <a
                                          routerLink="/leave-requests/{{ row.id }}"
                                        >
                                        <button mat-icon-button color="primary">
                                        <mat-icon>edit</mat-icon>
                                        </button>    
                                    </a>


                                    <button mat-icon-button color="warn"  (click)="deleteLeaveRequest(row.id)">
                                        <mat-icon>delete</mat-icon>
                                    </button>

                                    
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedLeaveRequestsColumns"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedLeaveRequestsColumns;"></tr>

                            <tr class="mat-row" *matNoDataRow>
                                <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                            </tr>
                        </table>
                        <mat-paginator [pageSizeOptions]="[10, 25, 100]" aria-label="Select page of users"></mat-paginator>
                    </div>
                    </div>
                </div>

                <hr>
                <h2 class="text-center mt-5">Gestion des utilisateurs des utilisateurs</h2>

            </div>
        </div>

    </mat-drawer-content>
</mat-drawer-container>